{
  "guild": {
    "id": "774897545717219328",
    "name": "Genie Community",
    "iconUrl": "https://cdn.discordapp.com/icons/774897545717219328/37e348a8a0b2b83ce9241942f0b9a8b5.png?size=512"
  },
  "channel": {
    "id": "1089630389263405086",
    "type": "GuildPublicThread",
    "categoryId": "1032309299512344626",
    "category": "help-forum",
    "name": "How to insert null data into SQLite database using SearchLight.save?",
    "topic": null
  },
  "dateRange": {
    "after": null,
    "before": null
  },
  "exportedAt": "2023-10-17T19:18:25.3969263+00:00",
  "messages": [
    {
      "id": "1089630389263405086",
      "type": "Default",
      "timestamp": "2023-03-26T19:22:09.154+00:00",
      "timestampEdited": "2023-03-26T20:24:38.427+00:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "I tried `Union{Missing, String}` in my model and wanted to pass `missing`.  However, instead of inserting a null value, the string \"missing\" is inserted to database.",
      "author": {
        "id": "566655860286160926",
        "name": "dearrude",
        "discriminator": "0000",
        "nickname": "DearRude",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/566655860286160926/89fe4df3ff8940b3f79618607373b190.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1090299363101777982",
      "type": "Default",
      "timestamp": "2023-03-28T15:40:24.946+00:00",
      "timestampEdited": "2023-03-28T15:40:50.079+00:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "try with `nothing` instead of `missing`. I tested this code below and got the result you want\n\n[ Info: INSERT  INTO houses (\"street\", \"size\", \"rooms\") VALUES ('Barcelona', 100.0, NULL)\n[ Info: ; SELECT CASE WHEN last_insert_rowid() = 0 THEN -1 ELSE last_insert_rowid() END AS LAST_INSERT_ID\ntrue\n\nStruct:\n```julia\n@kwdef mutable struct House <: AbstractModel\n    id::DbId = DbId()\n    street::String = \"Random street\"\n    size::Float32 = 100.0\n    rooms::Union{Int32,Nothing} = 4\nend\n```\n\nMigration:\n\n```julia\nfunction up()\n    create_table(:houses) do\n        [\n            pk()\n            columns([\n                :street => :string\n                :size => :float\n                :rooms => :int\n            ])\n        ]\n    end\n\nend\n````\n\nobject creation:\n\n```julia\nh = House(street=\"Barcelona\", size=100, rooms=nothing)\nsave(h)\n```",
      "author": {
        "id": "743412727464067154",
        "name": "pere_g",
        "discriminator": "0000",
        "nickname": "Pere",
        "color": "#71DAFF",
        "isBot": false,
        "roles": [
          {
            "id": "1007312585995071698",
            "name": "GENIE TEAM",
            "color": "#71DAFF",
            "position": 8
          },
          {
            "id": "1032698093654777886",
            "name": "Data Science Advocate",
            "color": "#E91E63",
            "position": 5
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/743412727464067154/bc30abeb49653e9978c0f7c90f4486a8.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1090615866607030322",
      "type": "Reply",
      "timestamp": "2023-03-29T12:38:05.262+00:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Can also `nothing` be used as default value in struct model? So if the value is not passed to `save` function, a null value be inserted to database?",
      "author": {
        "id": "566655860286160926",
        "name": "dearrude",
        "discriminator": "0000",
        "nickname": "DearRude",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/566655860286160926/89fe4df3ff8940b3f79618607373b190.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "743412727464067154",
          "name": "pere_g",
          "discriminator": "0000",
          "nickname": "Pere",
          "color": "#71DAFF",
          "isBot": false,
          "roles": [
            {
              "id": "1007312585995071698",
              "name": "GENIE TEAM",
              "color": "#71DAFF",
              "position": 8
            },
            {
              "id": "1032698093654777886",
              "name": "Data Science Advocate",
              "color": "#E91E63",
              "position": 5
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/743412727464067154/bc30abeb49653e9978c0f7c90f4486a8.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1090299363101777982",
        "channelId": "1089630389263405086",
        "guildId": "774897545717219328"
      }
    },
    {
      "id": "1090636188496445572",
      "type": "Default",
      "timestamp": "2023-03-29T13:58:50.378+00:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "I think so, don't see why it wouldn't work",
      "author": {
        "id": "743412727464067154",
        "name": "pere_g",
        "discriminator": "0000",
        "nickname": "Pere",
        "color": "#71DAFF",
        "isBot": false,
        "roles": [
          {
            "id": "1007312585995071698",
            "name": "GENIE TEAM",
            "color": "#71DAFF",
            "position": 8
          },
          {
            "id": "1032698093654777886",
            "name": "Data Science Advocate",
            "color": "#E91E63",
            "position": 5
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/743412727464067154/bc30abeb49653e9978c0f7c90f4486a8.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1091029057212252170",
      "type": "Reply",
      "timestamp": "2023-03-30T15:59:57.579+00:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "How to query them back? I get the following the error when trying to use `find` method.\n```\nMethodError: Cannot `convert` an object of type String to an object of type Nothing\n\nClosest candidates are:\n│      convert(::Type{Nothing}, ::Any) at some.jl:37\n│      convert(::Type{T}, ::Any) where T>:Nothing at some.jl:36\n│      convert(::Type{T}, ::Intervals.Interval{T}) where T at ~/.julia/packages/Intervals/MDxq7/src/interval.jl:240\n```",
      "author": {
        "id": "566655860286160926",
        "name": "dearrude",
        "discriminator": "0000",
        "nickname": "DearRude",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/566655860286160926/89fe4df3ff8940b3f79618607373b190.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "743412727464067154",
          "name": "pere_g",
          "discriminator": "0000",
          "nickname": "Pere",
          "color": "#71DAFF",
          "isBot": false,
          "roles": [
            {
              "id": "1007312585995071698",
              "name": "GENIE TEAM",
              "color": "#71DAFF",
              "position": 8
            },
            {
              "id": "1032698093654777886",
              "name": "Data Science Advocate",
              "color": "#E91E63",
              "position": 5
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/743412727464067154/bc30abeb49653e9978c0f7c90f4486a8.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1090636188496445572",
        "channelId": "1089630389263405086",
        "guildId": "774897545717219328"
      }
    },
    {
      "id": "1091328066271318066",
      "type": "Default",
      "timestamp": "2023-03-31T11:48:06.894+00:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "just one thing. it is probably best to set `nothing` as default value as you asked. I had some issues when having something else",
      "author": {
        "id": "743412727464067154",
        "name": "pere_g",
        "discriminator": "0000",
        "nickname": "Pere",
        "color": "#71DAFF",
        "isBot": false,
        "roles": [
          {
            "id": "1007312585995071698",
            "name": "GENIE TEAM",
            "color": "#71DAFF",
            "position": 8
          },
          {
            "id": "1032698093654777886",
            "name": "Data Science Advocate",
            "color": "#E91E63",
            "position": 5
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/743412727464067154/bc30abeb49653e9978c0f7c90f4486a8.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1091328138753097829",
      "type": "Default",
      "timestamp": "2023-03-31T11:48:24.175+00:00",
      "timestampEdited": "2023-03-31T11:49:21.92+00:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "As for retrieving, this is how:\n\n```julia\nusing SearchLight\nusing SearchLightSQLite\ninclude(\"app/resources/houses/Houses.jl\")\nusing .Houses\n\n# edit db/connection.yml\nSearchLight.Configuration.load() |> SearchLight.connect\n\nh = House(street=\"Barcelona\", size=200, rooms=nothing)\nsave(h)\nfind(House, SQLWhereExpression(\"size == ?\", 200))\n```\n\n````\nWARNING: replacing module Houses.\nWARNING: using Houses.House in module Main conflicts with an existing identifier.\n[ Info: INSERT  INTO houses (\"street\", \"size\", \"rooms\") VALUES ('Barcelona', 200.0, NULL)\n[ Info: ; SELECT CASE WHEN last_insert_rowid() = 0 THEN -1 ELSE last_insert_rowid() END AS LAST_INSERT_ID\n[ Info: SELECT \"houses\".\"id\" AS \"houses_id\", \"houses\".\"street\" AS \"houses_street\", \"houses\".\"size\" AS \"houses_size\", \"houses\".\"rooms\" AS \"houses_rooms\" FROM \"houses\" WHERE size == 200 ORDER BY houses.id ASC\n1-element Vector{House}:\n House\n| KEY            | VALUE     |\n|----------------|-----------|\n| id::DbId       | 1         |\n| rooms::Nothing | nothing   |\n| size::Float32  | 200.0     |\n| street::String | Barcelona |\n```",
      "author": {
        "id": "743412727464067154",
        "name": "pere_g",
        "discriminator": "0000",
        "nickname": "Pere",
        "color": "#71DAFF",
        "isBot": false,
        "roles": [
          {
            "id": "1007312585995071698",
            "name": "GENIE TEAM",
            "color": "#71DAFF",
            "position": 8
          },
          {
            "id": "1032698093654777886",
            "name": "Data Science Advocate",
            "color": "#E91E63",
            "position": 5
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/743412727464067154/bc30abeb49653e9978c0f7c90f4486a8.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1091328523098140782",
      "type": "Default",
      "timestamp": "2023-03-31T11:49:55.81+00:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "you can also do `findone(House, id=1)`",
      "author": {
        "id": "743412727464067154",
        "name": "pere_g",
        "discriminator": "0000",
        "nickname": "Pere",
        "color": "#71DAFF",
        "isBot": false,
        "roles": [
          {
            "id": "1007312585995071698",
            "name": "GENIE TEAM",
            "color": "#71DAFF",
            "position": 8
          },
          {
            "id": "1032698093654777886",
            "name": "Data Science Advocate",
            "color": "#E91E63",
            "position": 5
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/743412727464067154/bc30abeb49653e9978c0f7c90f4486a8.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1091358166220034049",
      "type": "Reply",
      "timestamp": "2023-03-31T13:47:43.281+00:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Here is my fieldtypes:\n```julia\n(DbId, Union{Nothing, String}, Union{Nothing, String}, Union{Nothing, Dates.DateTime}, Union{Nothing, Dates.DateTime}, Union{Nothing, String},...\n```\nAnd I inited all with `nothing` as mentioned. But I still get the conversion error when querying any data.\nHere is the error I faced when doing `findone(StructName, id=2)`:\n```julia\nERROR: MethodError: Cannot `convert` an object of type String to an object of type Nothing\nClosest candidates are:\n  convert(::Type{Nothing}, ::Any) at some.jl:37\n  convert(::Type{T}, ::Any) where T>:Nothing at some.jl:36\n  convert(::Type{T}, ::Intervals.AnchoredInterval{P, T}) where {P, T} at ~/.julia/packages/Intervals/MDxq7/src/anchoredinterval.jl:181\n  ...\n```\nWhy it tries to convert to the data to `Nothing` instead of `Union{Nothing, String}`?",
      "author": {
        "id": "566655860286160926",
        "name": "dearrude",
        "discriminator": "0000",
        "nickname": "DearRude",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/566655860286160926/89fe4df3ff8940b3f79618607373b190.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "743412727464067154",
          "name": "pere_g",
          "discriminator": "0000",
          "nickname": "Pere",
          "color": "#71DAFF",
          "isBot": false,
          "roles": [
            {
              "id": "1007312585995071698",
              "name": "GENIE TEAM",
              "color": "#71DAFF",
              "position": 8
            },
            {
              "id": "1032698093654777886",
              "name": "Data Science Advocate",
              "color": "#E91E63",
              "position": 5
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/743412727464067154/bc30abeb49653e9978c0f7c90f4486a8.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1091328523098140782",
        "channelId": "1089630389263405086",
        "guildId": "774897545717219328"
      }
    },
    {
      "id": "1091369164159058002",
      "type": "Default",
      "timestamp": "2023-03-31T14:31:25.394+00:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "this is not easy to solve without running the code, best I can do is guess. I'll share the code of my tests where saving/loading works, can you try running the null_values.jl file?\n\nhttps://github.com/GenieFramework/CodeExamples/tree/main/src/3.database/null_values",
      "author": {
        "id": "743412727464067154",
        "name": "pere_g",
        "discriminator": "0000",
        "nickname": "Pere",
        "color": "#71DAFF",
        "isBot": false,
        "roles": [
          {
            "id": "1007312585995071698",
            "name": "GENIE TEAM",
            "color": "#71DAFF",
            "position": 8
          },
          {
            "id": "1032698093654777886",
            "name": "Data Science Advocate",
            "color": "#E91E63",
            "position": 5
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/743412727464067154/bc30abeb49653e9978c0f7c90f4486a8.png?size=512"
      },
      "attachments": [],
      "embeds": [
        {
          "title": "CodeExamples/src/3.database/null_values at main · GenieFramework/Co...",
          "url": "https://github.com/GenieFramework/CodeExamples/tree/main/src/3.database/null_values",
          "timestamp": null,
          "description": "Contribute to GenieFramework/CodeExamples development by creating an account on GitHub.",
          "color": "#1E2327",
          "thumbnail": {
            "url": "https://images-ext-2.discordapp.net/external/0gV0VqORdjCbyh8RIPpXdbZxKbVP3_skty0pClmad-4/https/opengraph.githubassets.com/784f30c14b512205610fa8eecc733004b207ade0e9085571cbe834625d7a9fec/GenieFramework/CodeExamples",
            "width": 1200,
            "height": 600
          },
          "images": [],
          "fields": []
        }
      ],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1091375468663546057",
      "type": "Reply",
      "timestamp": "2023-03-31T14:56:28.505+00:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "I ran you example and it works. But when I added a row which the `rooms` column is not null, the same error message appears. Like so:\n```julia\nHouse(street=\"Barcelona\", size=200, rooms=nothing) |> save\nHouse(street=\"Barcelona\", size=200, rooms=\"123\") |> save\n```",
      "author": {
        "id": "566655860286160926",
        "name": "dearrude",
        "discriminator": "0000",
        "nickname": "DearRude",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/566655860286160926/89fe4df3ff8940b3f79618607373b190.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "743412727464067154",
          "name": "pere_g",
          "discriminator": "0000",
          "nickname": "Pere",
          "color": "#71DAFF",
          "isBot": false,
          "roles": [
            {
              "id": "1007312585995071698",
              "name": "GENIE TEAM",
              "color": "#71DAFF",
              "position": 8
            },
            {
              "id": "1032698093654777886",
              "name": "Data Science Advocate",
              "color": "#E91E63",
              "position": 5
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/743412727464067154/bc30abeb49653e9978c0f7c90f4486a8.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1091369164159058002",
        "channelId": "1089630389263405086",
        "guildId": "774897545717219328"
      }
    },
    {
      "id": "1091378954964828310",
      "type": "Default",
      "timestamp": "2023-03-31T15:10:19.704+00:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Yes I see it now, \" Cannot `convert` an object of type Int64 to an object of type Nothing\". Thanks for checking, I'll take a look and report back",
      "author": {
        "id": "743412727464067154",
        "name": "pere_g",
        "discriminator": "0000",
        "nickname": "Pere",
        "color": "#71DAFF",
        "isBot": false,
        "roles": [
          {
            "id": "1007312585995071698",
            "name": "GENIE TEAM",
            "color": "#71DAFF",
            "position": 8
          },
          {
            "id": "1032698093654777886",
            "name": "Data Science Advocate",
            "color": "#E91E63",
            "position": 5
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/743412727464067154/bc30abeb49653e9978c0f7c90f4486a8.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [
        {
          "emoji": {
            "id": "",
            "name": "\uD83D\uDE4F",
            "code": "pray",
            "isAnimated": false,
            "imageUrl": "https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f64f.svg"
          },
          "count": 1,
          "users": [
            {
              "id": "566655860286160926",
              "name": "dearrude",
              "discriminator": "0000",
              "nickname": "DearRude",
              "isBot": false,
              "avatarUrl": "https://cdn.discordapp.com/avatars/566655860286160926/89fe4df3ff8940b3f79618607373b190.png?size=512"
            }
          ]
        }
      ],
      "mentions": []
    },
    {
      "id": "1092037618742611988",
      "type": "Reply",
      "timestamp": "2023-04-02T10:47:37.386+00:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "@Pere Any updates on this?",
      "author": {
        "id": "566655860286160926",
        "name": "dearrude",
        "discriminator": "0000",
        "nickname": "DearRude",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/566655860286160926/89fe4df3ff8940b3f79618607373b190.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [
        {
          "emoji": {
            "id": "",
            "name": "\uD83D\uDC40",
            "code": "eyes",
            "isAnimated": false,
            "imageUrl": "https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f440.svg"
          },
          "count": 1,
          "users": [
            {
              "id": "743412727464067154",
              "name": "pere_g",
              "discriminator": "0000",
              "nickname": "Pere",
              "isBot": false,
              "avatarUrl": "https://cdn.discordapp.com/avatars/743412727464067154/bc30abeb49653e9978c0f7c90f4486a8.png?size=512"
            }
          ]
        }
      ],
      "mentions": [
        {
          "id": "743412727464067154",
          "name": "pere_g",
          "discriminator": "0000",
          "nickname": "Pere",
          "color": "#71DAFF",
          "isBot": false,
          "roles": [
            {
              "id": "1007312585995071698",
              "name": "GENIE TEAM",
              "color": "#71DAFF",
              "position": 8
            },
            {
              "id": "1032698093654777886",
              "name": "Data Science Advocate",
              "color": "#E91E63",
              "position": 5
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/743412727464067154/bc30abeb49653e9978c0f7c90f4486a8.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1091378954964828310",
        "channelId": "1089630389263405086",
        "guildId": "774897545717219328"
      }
    },
    {
      "id": "1092398257063333978",
      "type": "Default",
      "timestamp": "2023-04-03T10:40:40.262+00:00",
      "timestampEdited": "2023-04-03T10:41:06.754+00:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Ok I know what's going on:\n- When loading the database record with `find`, each field in the record is converted to the **type of the default value** in the struct\n- In our example, the default value for `rooms`is `nothing`of type `Nothing`. Hence, the `Int` from the DB record will be converted to `Nothing`\n- The conversion fails since `convert`cannot do it\n\nA quick and dirty solution is to overload the convert method so that it returns the value for `rooms` \n\n```julia\nBase.convert(t::Type{Nothing}, x::Int64) = x\n```\n\nThis is a MWE:\n\n```julia\nBase.convert(t::Type{Nothing}, x::Int64) = x\n\nSearchLight.Configuration.load() |> SearchLight.connect\n\n# h = House(street=\"Barcelona\", size=400, rooms=missing)\n# save(h)\nh = House(street=\"Barcelona 2\", size=400, rooms=nothing)\nsave(h)\nh = House(street=\"Barcelona 3\", size=400, rooms=4)\nsave(h)\n\n# find(House, SQLWhereExpression(\"street ==? AND size == ?\", \"Barcelona\", 400))\n@show find(House, SQLWhereExpression(\"street ==? AND size == ?\", \"Barcelona 2\", 400))\n@show find(House, SQLWhereExpression(\"street ==? AND size == ?\", \"Barcelona 3\", 400))\n````",
      "author": {
        "id": "743412727464067154",
        "name": "pere_g",
        "discriminator": "0000",
        "nickname": "Pere",
        "color": "#71DAFF",
        "isBot": false,
        "roles": [
          {
            "id": "1007312585995071698",
            "name": "GENIE TEAM",
            "color": "#71DAFF",
            "position": 8
          },
          {
            "id": "1032698093654777886",
            "name": "Data Science Advocate",
            "color": "#E91E63",
            "position": 5
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/743412727464067154/bc30abeb49653e9978c0f7c90f4486a8.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1092398265741361182",
      "type": "Default",
      "timestamp": "2023-04-03T10:40:42.331+00:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "This is the result:\n\n```julia\n[ Info: SELECT \"houses\".\"id\" AS \"houses_id\", \"houses\".\"street\" AS \"houses_street\", \"houses\".\"size\" AS \"houses_size\", \"houses\".\"rooms\" AS \"houses_rooms\" FROM \"houses\" WHERE street =='Barcelona 2' AND size == 400 ORDER BY houses.id ASC\nfind(House, SQLWhereExpression(\"street ==? AND size == ?\", \"Barcelona 2\", 400)) = House[House\n| KEY            | VALUE       |\n|----------------|-------------|\n| id::DbId       | 2           |\n| rooms::Nothing | nothing     |\n| size::Float32  | 400.0       |\n| street::String | Barcelona 2 |\n]\n[ Info: SELECT \"houses\".\"id\" AS \"houses_id\", \"houses\".\"street\" AS \"houses_street\", \"houses\".\"size\" AS \"houses_size\", \"houses\".\"rooms\" AS \"houses_rooms\" FROM \"houses\" WHERE street =='Barcelona 3' AND size == 400 ORDER BY houses.id ASC\nfind(House, SQLWhereExpression(\"street ==? AND size == ?\", \"Barcelona 3\", 400)) = House[House\n| KEY            | VALUE       |\n|----------------|-------------|\n| id::DbId       | 3           |\n| rooms::Int64   | 4           |\n| size::Float32  | 400.0       |\n| street::String | Barcelona 3 |\n````",
      "author": {
        "id": "743412727464067154",
        "name": "pere_g",
        "discriminator": "0000",
        "nickname": "Pere",
        "color": "#71DAFF",
        "isBot": false,
        "roles": [
          {
            "id": "1007312585995071698",
            "name": "GENIE TEAM",
            "color": "#71DAFF",
            "position": 8
          },
          {
            "id": "1032698093654777886",
            "name": "Data Science Advocate",
            "color": "#E91E63",
            "position": 5
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/743412727464067154/bc30abeb49653e9978c0f7c90f4486a8.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1092399160176689224",
      "type": "Default",
      "timestamp": "2023-04-03T10:44:15.581+00:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Another interesting thing I found:\n\nIf the DB record has a `NULL`field, `find`will return a struct with the default value for the field instead of `NULL`. So, if we set `rooms::Union{Nothing, Int} = 4`, loading a House with `NULL`rooms will return a House with 4 rooms",
      "author": {
        "id": "743412727464067154",
        "name": "pere_g",
        "discriminator": "0000",
        "nickname": "Pere",
        "color": "#71DAFF",
        "isBot": false,
        "roles": [
          {
            "id": "1007312585995071698",
            "name": "GENIE TEAM",
            "color": "#71DAFF",
            "position": 8
          },
          {
            "id": "1032698093654777886",
            "name": "Data Science Advocate",
            "color": "#E91E63",
            "position": 5
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/743412727464067154/bc30abeb49653e9978c0f7c90f4486a8.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1092399421792202784",
      "type": "Default",
      "timestamp": "2023-04-03T10:45:17.955+00:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "I'll open an issue about this. also @DearRude, I've opened an issue about inserting `missing`into the DB https://github.com/GenieFramework/SearchLight.jl/issues/67",
      "author": {
        "id": "743412727464067154",
        "name": "pere_g",
        "discriminator": "0000",
        "nickname": "Pere",
        "color": "#71DAFF",
        "isBot": false,
        "roles": [
          {
            "id": "1007312585995071698",
            "name": "GENIE TEAM",
            "color": "#71DAFF",
            "position": 8
          },
          {
            "id": "1032698093654777886",
            "name": "Data Science Advocate",
            "color": "#E91E63",
            "position": 5
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/743412727464067154/bc30abeb49653e9978c0f7c90f4486a8.png?size=512"
      },
      "attachments": [],
      "embeds": [
        {
          "title": "Saving struct to db with Missing value inserts \"missing!\" string in...",
          "url": "https://github.com/GenieFramework/SearchLight.jl/issues/67",
          "timestamp": null,
          "description": "Describe the bug When a struct's field has missingvalue of type Missing, saving it to a sqlite DB inserts a string instead of a NULL value. To reproduce I've created a MWE that inserts miss...",
          "color": "#1E2327",
          "thumbnail": {
            "url": "https://images-ext-2.discordapp.net/external/HU8x5HAkv4xtH8By43SYZsJspC0heEJ8uYIcUMhGI54/https/opengraph.githubassets.com/90320d7beebfccce5ba2604d15d80998cc09706d89f04eb469c014408372100f/GenieFramework/SearchLight.jl/issues/67",
            "width": 1200,
            "height": 600
          },
          "images": [],
          "fields": []
        }
      ],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "566655860286160926",
          "name": "dearrude",
          "discriminator": "0000",
          "nickname": "DearRude",
          "color": null,
          "isBot": false,
          "roles": [],
          "avatarUrl": "https://cdn.discordapp.com/avatars/566655860286160926/89fe4df3ff8940b3f79618607373b190.png?size=512"
        }
      ]
    },
    {
      "id": "1092404909573406790",
      "type": "Default",
      "timestamp": "2023-04-03T11:07:06.344+00:00",
      "timestampEdited": "2023-04-03T11:07:11.008+00:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "New issue on this \nhttps://github.com/GenieFramework/SearchLight.jl/issues/68",
      "author": {
        "id": "743412727464067154",
        "name": "pere_g",
        "discriminator": "0000",
        "nickname": "Pere",
        "color": "#71DAFF",
        "isBot": false,
        "roles": [
          {
            "id": "1007312585995071698",
            "name": "GENIE TEAM",
            "color": "#71DAFF",
            "position": 8
          },
          {
            "id": "1032698093654777886",
            "name": "Data Science Advocate",
            "color": "#E91E63",
            "position": 5
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/743412727464067154/bc30abeb49653e9978c0f7c90f4486a8.png?size=512"
      },
      "attachments": [],
      "embeds": [
        {
          "title": "For struct with `nothing` as default value, `find` converts non-NUL...",
          "url": "https://github.com/GenieFramework/SearchLight.jl/issues/68",
          "timestamp": null,
          "description": "Full code for the MWE here: https://github.com/GenieFramework/CodeExamples/tree/main/src/3.database/null_values I have a struct where one of its fields can be Intor Nothing @kwdef mutable struct Ho...",
          "color": "#1E2327",
          "thumbnail": {
            "url": "https://images-ext-1.discordapp.net/external/7HWdHzjtxWRJtMiARkJDvnKH3lG1nMfvXKBc5J8a_EM/https/opengraph.githubassets.com/464b0c3f395760d6a6379abd8e9ec9a443763198acd5ce0a2a9ff1d4b65378f8/GenieFramework/SearchLight.jl/issues/68",
            "width": 1200,
            "height": 600
          },
          "images": [],
          "fields": []
        }
      ],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1093154585318789130",
      "type": "Default",
      "timestamp": "2023-04-05T12:46:02.97+00:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Thank you for your extensive investigation.",
      "author": {
        "id": "566655860286160926",
        "name": "dearrude",
        "discriminator": "0000",
        "nickname": "DearRude",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/566655860286160926/89fe4df3ff8940b3f79618607373b190.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [
        {
          "emoji": {
            "id": "",
            "name": "\uD83D\uDC9B",
            "code": "yellow_heart",
            "isAnimated": false,
            "imageUrl": "https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f49b.svg"
          },
          "count": 1,
          "users": [
            {
              "id": "743412727464067154",
              "name": "pere_g",
              "discriminator": "0000",
              "nickname": "Pere",
              "isBot": false,
              "avatarUrl": "https://cdn.discordapp.com/avatars/743412727464067154/bc30abeb49653e9978c0f7c90f4486a8.png?size=512"
            }
          ]
        }
      ],
      "mentions": []
    },
    {
      "id": "1093290027796152340",
      "type": "Reply",
      "timestamp": "2023-04-05T21:44:14.973+00:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Can also check for `DateTime` type?\nI'd added these lines to my `initializers/converters.jl`:\n```julia\nconvert(t::Type{Nothing}, x::Int) = x\nconvert(t::Type{Nothing}, x::Float64) = x\nconvert(t::Type{Nothing}, x::String) = x\nconvert(t::Type{Nothing}, x::Bool) = x\nconvert(t::Type{Nothing}, x::DateTime) = x\n```\n\nWhen I try to `findone` on a object, I receive this error:\n```\n┌ Error: 2023-04-06 01:10:02 TypeError(:setfield!, \"\", Union{Nothing, Dates.DateTime}, \"2022-11-14T20:39:39\")\n└ @ SearchLight ~/.julia/packages/SearchLight/Ps2Js/src/SearchLight.jl:543\nERROR: TypeError: in setfield!, expected Union{Nothing, Dates.DateTime}, got a value of type String\nStacktrace:\n [1] to_model(m::Type{Sale}, row::DataFrames.DataFrameRow{DataFrames.DataFrame, DataFrames.Index}; skip_callbacks::Vector{Symbol})\n   @ SearchLight ~/.julia/packages/SearchLight/Ps2Js/src/SearchLight.jl:541\n [2] to_model\n   @ ~/.julia/packages/SearchLight/Ps2Js/src/SearchLight.jl:498 [inlined]\n [3] to_model!!\n   @ ~/.julia/packages/SearchLight/Ps2Js/src/SearchLight.jl:579 [inlined]\n [4] to_models(m::Type{Sale}, df::DataFrames.DataFrame)\n   @ SearchLight ~/.julia/packages/SearchLight/Ps2Js/src/SearchLight.jl:480\n [5] find (repeats 2 times)\n   @ ~/.julia/packages/SearchLight/Ps2Js/src/SearchLight.jl:92 [inlined]\n [6] find(m::Type{Sale}; order::SQLOrder, limit::SQLLimit, offset::Int64, where_conditions::Base.Pairs{Symbol, Int64, Tuple{Symbol}, NamedTuple{(:id,), Tuple{Int64}}})\n   @ SearchLight ~/.julia/packages/SearchLight/Ps2Js/src/SearchLight.jl:156\n [7] #findone#32\n   @ ~/.julia/packages/SearchLight/Ps2Js/src/SearchLight.jl:166 [inlined]\n [8] top-level scope\n   @ REPL[4]:1\n```",
      "author": {
        "id": "566655860286160926",
        "name": "dearrude",
        "discriminator": "0000",
        "nickname": "DearRude",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/566655860286160926/89fe4df3ff8940b3f79618607373b190.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "743412727464067154",
          "name": "pere_g",
          "discriminator": "0000",
          "nickname": "Pere",
          "color": "#71DAFF",
          "isBot": false,
          "roles": [
            {
              "id": "1007312585995071698",
              "name": "GENIE TEAM",
              "color": "#71DAFF",
              "position": 8
            },
            {
              "id": "1032698093654777886",
              "name": "Data Science Advocate",
              "color": "#E91E63",
              "position": 5
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/743412727464067154/bc30abeb49653e9978c0f7c90f4486a8.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1092398265741361182",
        "channelId": "1089630389263405086",
        "guildId": "774897545717219328"
      }
    },
    {
      "id": "1096381605116911706",
      "type": "Default",
      "timestamp": "2023-04-14T10:29:04.445+00:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "@Pere Any updates on this?\nI have this problem on `DateTime` and `Bool` types as well which I can't write the right converter for.",
      "author": {
        "id": "566655860286160926",
        "name": "dearrude",
        "discriminator": "0000",
        "nickname": "DearRude",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/566655860286160926/89fe4df3ff8940b3f79618607373b190.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "743412727464067154",
          "name": "pere_g",
          "discriminator": "0000",
          "nickname": "Pere",
          "color": "#71DAFF",
          "isBot": false,
          "roles": [
            {
              "id": "1007312585995071698",
              "name": "GENIE TEAM",
              "color": "#71DAFF",
              "position": 8
            },
            {
              "id": "1032698093654777886",
              "name": "Data Science Advocate",
              "color": "#E91E63",
              "position": 5
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/743412727464067154/bc30abeb49653e9978c0f7c90f4486a8.png?size=512"
        }
      ]
    },
    {
      "id": "1097641183905316985",
      "type": "Default",
      "timestamp": "2023-04-17T21:54:11.43+00:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Unfortunately we haven't had time to look into these issues. For the DateTime error, you're attempting to load a string from the databse and store it into a DateTime object, which fails.\n\nPerhaps you could have it as a string in the struct and then parse it into a Date object? I know it's not ideal, but you could then define a getter like\n\n`get_date(s:MyStruct) = DateTime(s.date)`\n\nIf you'd like to learn more about getters and setters, I recommend reading Tom Kwong's book Hands-On Design Patterns and Best Practices with Julia",
      "author": {
        "id": "743412727464067154",
        "name": "pere_g",
        "discriminator": "0000",
        "nickname": "Pere",
        "color": "#71DAFF",
        "isBot": false,
        "roles": [
          {
            "id": "1007312585995071698",
            "name": "GENIE TEAM",
            "color": "#71DAFF",
            "position": 8
          },
          {
            "id": "1032698093654777886",
            "name": "Data Science Advocate",
            "color": "#E91E63",
            "position": 5
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/743412727464067154/bc30abeb49653e9978c0f7c90f4486a8.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1098178540396105728",
      "type": "Default",
      "timestamp": "2023-04-19T09:29:27.201+00:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "I implemented a similar design but thought there is a cleaner way to do it. Thank you.",
      "author": {
        "id": "566655860286160926",
        "name": "dearrude",
        "discriminator": "0000",
        "nickname": "DearRude",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/566655860286160926/89fe4df3ff8940b3f79618607373b190.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    }
  ],
  "messageCount": 23
}